(function(){tinymce.create("tinymce.plugins.FilepickerPlugin",{init:function(ed,url){ed.addCommand("bpFilepicker",function(){filepicker.pick({mimetype:"image/*"},function(FPFile){var imgHTML=tinymce.activeEditor.dom.createHTML("img",{src:FPFile.url,style:"max-width: 930px;"});ed.execCommand("mceInsertContent",false,imgHTML,{skip_undo:1});ed.undoManager.add()})});ed.addButton("filepicker",{title:"Insert an image using Filepicker.io",cmd:"bpFilepicker",image:url+"/img/fp-icon.png"})},getInfo:function(){return{longname:"Filepicker plugin",author:"Brian Park",authorTwitterURL:"https://twitter.com/yaru22",authorGithubURL:"https://github.com/yaru22",authorurl:"http://brianpark.ca",infourl:"https://github.com/yaru22/tinymce-filepicker",version:"1.0"}}});tinymce.PluginManager.add("filepicker",tinymce.plugins.FilepickerPlugin)})();